---
description: CMX スキーマから型付きコードを再生成する
disable-model-invocation: true
allowed-tools: Bash, Read, Glob
---

# コード生成

Admin 側でコレクション・データタイプ・フォームを変更した後に実行する。

## 手順

### 1. コード生成（冪等）

```bash
npx cmx-sdk generate
```

### 2. 差分確認

`cmx/generated/` 配下の変更を確認し、以下を報告:
- 新規追加されたファイル
- 変更されたファイル（型定義の差分）
- 削除されたファイル
- フォーム: Zod スキーマ・型定義・送信関数の変更

### 3. 影響確認

生成されたコードを使用しているページに影響がないか確認:
- 型が変わったフィールドがないか
- 削除されたフィールドを参照していないか
- フォームのフィールド変更により UI 側の調整が必要でないか

### 4. 新規追加があった場合の scaffold

新しいコレクション・データタイプ・フォームが追加された場合:

```bash
npx cmx-sdk scaffold --only {category}:{slug}
```

既存ファイルは上書きされないため、安全に実行可能。
